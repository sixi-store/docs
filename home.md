## 接入必读

本文档是sixi-store后台通用http请求接口文档。

### 请求方式
后台接口使用`Restful Api`规范,HTTP动词如下:

* GET: 从服务器取出资源(一项或多项)
* POST: 在服务器新建一个资源
* PUT: 在服务器更新资源(客户端提供改变后的完整资源)
* DELETE: 从服务器删除资源

以下是一个restful api接口示例:

| 参数    | 类型          | 说明           |
| :----  | :----         | :-----        |
| GET    |	`/blog`      | 获取博客列表    |
| POST   |	`/blog`      | 新建一个博客    |
| GET    |	`/blog/{id}` | 或许一个博客详情 |
| PUT    |	`/blog/{id}` | 更新一个博客    |
| DELETE |	`/blog/{id}` | 删除一个博客    |

<p class="warning">
   我们接口规定: <code>POST</code>、<code>PUT</code>、<code>DELETE</code>请求头`Content-Type`统一采用`application/x-www-form-urlencoded`; <code>DELETE</code> 将参数放置在url, 不带body参数; 图片上传使用<code>POST</code>请求,请求头`Content-Type`统一采用`multipart/form-data`。
</p>

### 返回格式
接口返回为json数据.通常包含如下参数:

| 参数     | 类型   | 说明      | 示例值      |
| :----   | :----  | :-----    | ----:      | 
| code | number | 错误码(正确时值为0) |  2000   | 
| data    | any    | 接口正确时返回数据  | ""  |
| msg     | string | 接口错误时返回错误信息 | "操作失败" |
| sub_msg | string | 错误明细(线上正式版此参数不存在) | "sql error: no sql row" |
<p class="danger">
  参数 <code>sub_msg</code> 是为了前端快速向后端反应错误内容,只有在测试版本才具有,线上版本不存在此参数,所以前端<b>请勿使用</b>该参数。
</p>

接口正确时返回格式示例如下:
```json
{
    "code": 20000,
    "data": ""
}
```
接口错误时返回格式示例如下:
```json
{
    "code": 40004,
    "msg": "操作失败",
    "result": false
}
```

### HTTP 状态码
接口一般产生以下状态码

| 状态码 | 说明     | 原因                       |
| :---- | :-----  | :----                      |
| 200   | 正常     |        -                   |
| 404   | 未找到    | 接口不存在或请求使用的方法错误 |
| 401   | 接口未授权| 未登录或用户未授权            |
| 408   | 请求超时  | 服务器请求超时               |

### 错误码
| code(错误码)  | msg(错误描述) | 解决方案 |
| :---- | :-----  | :----         |
| 10000 | 接口调用成功 | - |
| 40001 | 缺少必选参数 | 检查请求参数 |
| 40004 | 处理失败    | 联系后端程序员 |

### 分页数据参数说明

带分页数据公共请求参数:

| 参数      | 类型   |  是否必须  | 最大长度 | 默认值 | 描述         | 示例   |
| :----    | :----- | :----    |  :----  | :---- |  :----       | :---- |
| page     | number | 否       |   32    |   1    | 当前第几页    | 1     |
| pageSize | number | 否       |   32    |   10    | 每页显示数量 | 10     |

带分页数据公共响应数据参数:

| 参数       | 类型   |   描述                | 示例   |
| :----     | :----- |  :----               | :---- |
|  total    | number | 所有页总共具有的记录数量 | 1     |
| last_page | number | 最后一页              | 10     |
| data      | array  |  当前页分页数据        | [{"id": 1, "name": "test", "summary": "" ,"created_at": "2006-01-02 13:04:05"}] |

